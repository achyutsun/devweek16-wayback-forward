<!doctype html>
<head>
	<meta charset="utf-8">
	<title>Archive Data View</title>
	<meta name="description" content="Archive data stuff">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/styles.css">
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="https://rawgit.com/jsoma/tabletop/master/src/tabletop.js"></script>

	<script src="d3.v3.min.js" charset="utf-8"></script>
	<script src="src/eventDrops.js"></script>

</head>

<body >
<div id="main">

<div class="scrollable-table">

	<form id="searchbox" action="">
	    <input id="search" type="text" placeholder="Type here">
	    <input id="submit" type="submit" value="Search">
	</form>

	<h1 id="websiteName">Name of Website</h1>
	<form name="webPageData">

	<div id="rectangle" style="width:20px; height:20px; background-color:#FFFF00; float:left"></div> 
	  <div style="float:left;margin-left: 0.1cm;">Minor</div><br>
	  <div id="rectangle" style="width:20px; height:20px; background-color:#02BBBB; float:left"></div> 
	  <div style="float:left;margin-left: 0.1cm;">Major</div><br>
	  <div id="rectangle" style="width:20px; height:20px; background-color:#D3D3D3; float:left"></div> 
	  <div style="float:left;margin-left: 0.1cm;">Redirect</div><br>
	  <div id="rectangle" style="width:20px; height:20px; background-color:#FF0000; float:left"></div> 
	  <div style="float:left;margin-left: 0.1cm;">404</div><br>

	<table id="urlDataTable" class="table table-striped table-header-rotated">
	    <thead>
	      <tr>
	        <th><div><span>Date</span></div></th>
	        <th><div><span>Why</span></div></th>
	        <th><div><span>Change</span></div></th>
	      </tr>
	    </thead>
	    <tbody>
	  	</tbody>
	</table>
	<br>
	  
	</form>
</div>

<script type="text/javascript">
	$(document).ready(function() {
	 	setWebsiteName();
	 	createData();
	 	// createASD();
	});

	// function createASD() {
	// 	var data = [
	// 	  { name: "http requests", dates: [new Date('2014/09/15 13:24:54'), new Date('2014/09/15 13:25:03'), new Date('2014/09/15 13:25:05'), ...] },
	// 	  { name: "SQL queries", dates: [new Date('2014/09/15 13:24:57'), new Date('2014/09/15 13:25:04'), new Date('2014/09/15 13:25:04'), ...] },
	// 	  { name: "cache invalidations", dates: [new Date('2014/09/15 13:25:12'), ...] }
	// 	];

	// 	var eventDropsChart = d3.chart.eventDrops();
	// 	d3.select('#chart_placeholder')
	// 	  .datum(data)
	// 	  .call(eventDropsChart);
	// }

	function setWebsiteName() {
		document.getElementById("websiteName").innerHTML = "New Website Name";
	}


	function createData() {
		
		var text = '{ "data" : [' +
'{ "date":"1455394949" , "why":"Y" , "change":"minor" },' +
'{ "date":"1455396949" , "why":"Some reason", "change":"major" },' +
'{ "date":"1453376459" , "why":"Some reason", "change":"none" },' +
'{ "date":"1455396949" , "why":"Some reason", "change":"none" },' +
'{ "date":"1452336949" , "why":"Some reason", "change":"none" },' +
'{ "date":"1451366949" , "why":"Some reason", "change":"404" },' +
'{ "date":"1455694949" , "why":"Some other reason", "change":"404" } ]}';

		var obj = JSON.parse(text);

		function createDataTable() {
			var tableRef = document.getElementById('urlDataTable').getElementsByTagName('tbody')[0];
			for (var i = 0; i < obj.data.length; i++) {

				var object = obj.data[i];
				var newRow = tableRef.insertRow(tableRef.rows.length);

				var formattedTime = object.date

				var cell1 = newRow.insertCell(0);
				var objectId = document.createTextNode(formattedTime);
				cell1.appendChild(objectId);

				var cell2 = newRow.insertCell(1);
				var objectId = document.createTextNode(object.why);
				cell2.appendChild(objectId);

				var cell3 = newRow.insertCell(2);
				var objectId = document.createTextNode(object.change);
				cell3.appendChild(objectId);

				// var cell4 = newRow.insertCell(3);
				// var objectId = document.createTextNode(object.link);
				// cell4.appendChild(objectId);

				if (object.change == "minor") {
					newRow.style.backgroundColor = '#FFFF00';
				} else if (object.change == "major") {
					newRow.style.backgroundColor = '#02BBBB';
				} else if (object.change == "redirect") {
					newRow.style.backgroundColor = '#D3D3D3';
				} else if (object.change == "404") {
					newRow.style.backgroundColor = '#FF0000';
				}
			}
		}

		createDataTable()

		// function bestUsers() {
		// 	var User = Parse.Object.extend("User");
		// 	var query = new Parse.Query(User);
		// 	query.descending("LoginCount");
		// 	query.notContainedIn("objectId", OurUserIds);
		// 	query.limit(40);
		// 	query.find({
		// 	  success: function(results) {

		// 		var tableRef = document.getElementById('urlDataTable').getElementsByTagName('tbody')[0];

		// 	  	for (var i = 0; i < results.length; i++) {
		// 	  		var result = results[i];

		// 			// Insert a row in the table at the last row
		// 			var newRow   = tableRef.insertRow(tableRef.rows.length);

		// 			var newCell  = newRow.insertCell(0);
		// 			var objectId  = document.createTextNode(result.id);
		// 			newCell.appendChild(objectId);

		// 			var newCell1  = newRow.insertCell(1);
		// 			var nickname  = document.createTextNode(result.get("Nickname"));
		// 			newCell1.appendChild(nickname);

		// 			var newCell2  = newRow.insertCell(2);
		// 			var who  = document.createTextNode(result.get("Who"));
		// 			newCell2.appendChild(who);

		// 			var newCell3  = newRow.insertCell(3);
		// 			var swipeCount = result.get("TotalSpreadCount") + result.get("TotalSkipCount")
		// 			var totalSwipeCount  = document.createTextNode(swipeCount);
		// 			newCell3.appendChild(totalSwipeCount);

		// 			var newCell4  = newRow.insertCell(4);
		// 			var totalUploadCount  = document.createTextNode(result.get("TotalUploadCount"));
		// 			newCell4.appendChild(totalUploadCount);

		// 			var newCell5  = newRow.insertCell(5);
		// 			var totalCommentCount  = document.createTextNode(result.get("TotalCommentCount"));
		// 			newCell5.appendChild(totalCommentCount);

		// 			var newCell6  = newRow.insertCell(6);
		// 			var loginCount  = document.createTextNode(result.get("LoginCount"));
		// 			newCell6.appendChild(loginCount);

		// 			var d = new Date();
		// 			var time = (7 * 24 * 3600 * 1000); // 7 days
		// 			var interval = new Date(d.getTime() - (time));

		// 			var lastLoginDate = result.get("LoginDate");

		// 			if (swipeCount == totalPostCount) {
		// 				newRow.style.backgroundColor = '#FF0000';
		// 			} else if (swipeCount > totalPostCount - 40) {
		// 				newRow.style.backgroundColor = '#FFFF00';
		// 			}

		// 			if (lastLoginDate < interval || lastLoginDate === undefined) {
		// 				newRow.style.backgroundColor = '#02BBBB';
		// 			}
		// 	  	};
		// 	  },
		// 	  error: function(error) {
		// 	    // The request failed
		// 	  }
		// 	});
		// }
	}

</script>
</div>
</body>

</html>
